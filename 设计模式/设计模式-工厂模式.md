---
title: 设计模式 工厂模式
date: 2020-09-18 14:30:48
tags: 设计模式
categories: Java基础
---

简单聊一下设计模式中常用的工厂模式。


## 一、 简介与分类

工厂模式是三种设计模式的统称， “简单工厂模式” 、 “工厂方法模式”、 “抽象工厂模式”。这三种即工厂模式的三种分类。

### 1、解决的问题


工厂模式要解决的问题 ： 如何优雅地创建对象。 

实际业务中通过 new 关键字创建一个对象往往需要多方依赖给对象提供初始化数据、或是查找配置文件，所以构造函数会写的非常长。构造函数过长，或者传递参数过多都是不利于修改和维护。

```
class PC{
    String field;
    Cpu cpu;
    public PC(){
        //此处有 * 100 个零件注入
        this.cpu = new Cpu();
        this.field = "this is a PC";
    }
}

class Cpu{
    String field;
    public Cpu(){
        this.field = "this is a CPU";
    }
}
```

能不能有一个类“工厂类”，专门负责创建对象这个过程。  对于创建对象过程的操控，（即改动 PC 的构造方法），人们只需要修改这个“工厂类”的创建方法 不用改动 PC 的代码。

### 2、分类

简单工厂模式 ： 上述改动就是简单工厂模式 。 

```
public class SimpleFactory {

    /**
     * 简单工厂模式
     * 举例 ： 工厂模式生产电脑
     */
    public static void main(String[] args) {
        PC pc = new PC();
    }
    
    public PC getPC(){
        PC p = new PC();
        Cpu c = new Cpu();
        
        //此处有 * 100 个零件注入
        p.cpu = c;
        
        return p;
    }   
}

class PC{
    String field;
    Cpu cpu;
    public PC(){
        this.field = "this is a PC";
    }
}

class Cpu{
    String field;
    public Cpu(){
        this.field = "this is a CPU";
    }
}
```
上述代码不能决定生产哪种 PC （假定 PC 有很多子类（或是接口的实现类））。决定生产 PC 种类是通过外部传参就是 “简单工厂模式”，具体实现代码下部分再谈。

**工厂方法模式** ： 显然简单工厂模式不满足 “开闭原则” ， 所以我们就搞出了针对不同的子类实现对象，创建不同的工厂用于生产不同的对象。

**抽象工厂模式** ： 在工厂方法模式中， 针对不同的对象，我们需要 new 不同的工厂。 可以发现这个工厂只能生产一种东西？  效率是比较低的。 如果，几个产品都是由同一家公司生产的。工厂能不能生产这个品牌的全部商品？ 这就是抽象工厂模式。




##　二、工厂模式的实现

情景 ： 

###  1、 简单工厂



###  2、工厂方法



###  3、抽象工厂




## 三、实际中的应用


spring bean



## 四、注： 

面向对象开闭原则 : 即对修改封闭，对扩展开放。即当业务需要我为对象增加某属性，不能修改我的源代码。  但是可以支持你在原代码的基础上进行重写重载继承实现…… 就是，你可以改动你自己新增的代码，不能动以前的代码。

