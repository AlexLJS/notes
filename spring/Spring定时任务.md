

整理一下 Spring 定时任务的使用，省去百度时间。参考文献文末标注。

## 基于静态注解 （项目中常用） 


单线程
```java



```

>@Scheduled注解可以控制方法定时执行，其中有三个参数可选择：

>1、fixedDelay控制方法执行的间隔时间，是以上一次方法执行完开始算起，如上一次方法执行阻塞住了，那么直到上一次执行完，并间隔给定的时间后，执行下一次。

>2、fixedRate是按照一定的速率执行，是从上一次方法执行开始的时间算起，如果上一次方法阻塞住了，下一次也是不会执行，但是在阻塞这段时间内累计应该执行的次数，当不再阻塞时，一下子把这些全部执行掉，而后再按照固定速率继续执行。

>3、cron表达式可以定制化执行任务，但是执行的方式是与fixedDelay相近的，也是会按照上一次方法结束时间开始算起。

>4、initialDelay 。如： @Scheduled(initialDelay = 10000,fixedRate = 15000 这个定时器就是在上一个的基础上加了一个initialDelay = 10000 意思就是在容器启动后,延迟10秒后再执行一次定时器,以后每15秒再执行一次该定时器。


多线程
```java


```


## 基于动态接口

```java


```

```java


```


## cron 表达式 单位

` 秒 分钟 小时 日期 月份 星期 年（可选） `

|字段|允许值|允许的特殊字符|
|----|----|----|
|秒|0-59|, - * /|
|分|0-59|, - * /|
|小时|0-23|, - * /|
|日期|1-31|, - * ? / L W C|
|月份|1-12|, - * /|
|星期|1-7|, - * ? / L C #|
|年|1970-2099|, - * /|

## cron 表达式 符号规则

```
“*” : 所有的值 , 如：“每分钟”。

“?” : 非明确的值, 表示日期和星期冲突，该忽略哪个字段。(只在 日期 和 星期 中使用)

“-” : 范围 , 如：“10-12” 。

“,” : 另外的值。如：“MON,WED,FRI”在星期域里表示”星期一、星期三、星期五”。

“/” ： 指定增量, A/B 从 A 开始每 ++B 触发一次 。 如： “5/15”在分钟域从5分开始 每小时的 5，20，35和 50。 

L   ： 表示最后 仅日、月，例如‘6L’就表示一个月的最后一个星期五。

“W” ： 只允许日期域出现。这个字符用于指定日期的最近工作日。例如：如果你在日期域中写“15W”，表示：这个月15号最近的工作日。
所以，如果15号是周六，则任务会在14号触发。如果15好是周日，则任务会在周一也就是16号触发。如果是在日期域填写“1W”即使1号是周六，
那么任务也只会在下周一，也就是3号触发，“W”字符指定的最近工作日是不能够跨月份的。字符“W”只能配合一个 单独的数值使用，不能够是一个数字段，
如：1-15W是错误的。

LW  ： “L”和“W”可以在日期域中联合使用，LW表示这个月最后一周的工作日。（某月最后一个星期五）

#   ： 只允许在星期域中出现， 表示本月的某某天。例如：“6#3”表示本月第三周的星期五（6表示星期五，3表示第三周）。

C ： 字符“C”允许在日期域和星期域出现。这个字符依靠一个指定的“日历”。也就是说这个表达式的值依赖于相关的“日历”的计算结果，如果没有“日历” 关联，则等价于所有包含的“日历”。如：日期域是“5C”表示关联“日历”中第一天，或者这个月开始的第一天的后5天。星期域是“1C”表示关联“日历” 中第一天，或者星期的第一天的后1天，也就是周日的后一天（周一）。

```

## 参考文章


[https://blog.csdn.net/qq_34129814/article/details/85090162](https://blog.csdn.net/qq_34129814/article/details/85090162)

[在线生成器](http://cron.qqe2.com/) 

[https://www.cnblogs.com/mmzs/p/10161936.html](https://www.cnblogs.com/mmzs/p/10161936.html)